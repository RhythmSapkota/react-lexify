"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const t=require("./index-B68OGEr0.js"),a=require("react");function j({equation:r,setEquation:E,inline:u},e){const i=n=>{E(n.target.value)};return u&&t.uo(e)?t.jsxRuntimeExports.jsxs("span",{className:"EquationEditor_inputBackground",children:[t.jsxRuntimeExports.jsx("span",{className:"EquationEditor_dollarSign",children:"$"}),t.jsxRuntimeExports.jsx("input",{className:"EquationEditor_inlineEditor",value:r,onChange:i,autoFocus:!0,ref:e}),t.jsxRuntimeExports.jsx("span",{className:"EquationEditor_dollarSign",children:"$"})]}):t.jsxRuntimeExports.jsxs("div",{className:"EquationEditor_inputBackground",children:[t.jsxRuntimeExports.jsx("span",{className:"EquationEditor_dollarSign",children:`$$
`}),t.jsxRuntimeExports.jsx("textarea",{className:"EquationEditor_blockEditor",value:r,onChange:i,ref:e}),t.jsxRuntimeExports.jsx("span",{className:"EquationEditor_dollarSign",children:`
$$`})]})}const f=a.forwardRef(j);function q({equation:r,inline:E,nodeKey:u}){const[e]=t.o(),i=t.a$1(),[n,p]=a.useState(r),[l,d]=a.useState(!1),x=a.useRef(null),m=a.useCallback(o=>{d(!1),e.update(()=>{const s=t.as(u);t.$isEquationNode(s)&&(s.setEquation(n),o&&s.selectNext(0,0))})},[e,n,u]);return a.useEffect(()=>{!l&&n!==r&&p(r)},[l,r,n]),a.useEffect(()=>{if(i)return l?t.j(e.registerCommand(t.le,o=>{const s=document.activeElement;return x.current!==s&&m(),!1},t.Ki),e.registerCommand(t.Oe,o=>{const s=document.activeElement;return x.current===s?(m(!0),!0):!1},t.Ki)):e.registerUpdateListener(({editorState:o})=>{o.read(()=>{const c=t.Nr();return t.ur(c)&&c.has(u)&&c.getNodes().length===1})&&d(!0)})},[e,u,m,l,i]),t.jsxRuntimeExports.jsx(t.jsxRuntimeExports.Fragment,{children:l&&i?t.jsxRuntimeExports.jsx(f,{equation:n,setEquation:p,inline:E,ref:x}):t.jsxRuntimeExports.jsx(t.ErrorBoundary,{onError:o=>e._onError(o),fallback:null,children:t.jsxRuntimeExports.jsx(t.KatexRenderer,{equation:n,inline:E,onDoubleClick:()=>{i&&d(!0)}})})})}exports.default=q;
//# sourceMappingURL=EquationComponent-CQNVvUB0.js.map
